<div class="container">
  <h3>Publish Message</h3>

  <label for="topic">Topic:</label>
  <select
    class="browser-default custom-select"
    name="topic" id="topic"
    [(ngModel)]="message.topic">
    <option selected></option>
    <option *ngFor="let t of topics" [ngValue]="t.binding">{{t.title}}</option>
  </select>

  <label>Property:</label>
  <ng-container *ngFor="let p of properties">
    <div class="form-check">
      <input
        class="form-check-input"
        name="properties" type="checkbox" [(ngModel)]="p[1]" id="checkboxid" (change)="propertiesSelect()"/>
      <label class="form-check-label" for="checkboxid">
        {{p[0].name}}
      </label>
    </div>
  </ng-container>

  <label for="sender">Sender:</label>
  <input class="form-control" name="sender"
         id="sender" placeholder="Sender"
         [(ngModel)]="message.sender">

  <label for="title">Title:</label>
  <input class="form-control" name="title"
         id="title" placeholder="Title"
         [(ngModel)]="message.title">

  <label for="content">Message content:</label>
  <textarea class="form-control"
            name="content" id="content" placeholder="Content" [(ngModel)]="message.content"></textarea>

  <label for="starttime">Send message at:</label>
  <input name="starttime" class="browser-default custom-select" type="datetime-local" [(ngModel)]="message.starttime"/>

  <div class="custom-file">
    <input type="file" id="fileSelection" name="attachmentFile" class="custom-file-input" (change)="fileSelect($event)">
    <label class="custom-file-label" for="fileSelection">{{fileName}}</label>
  </div>

  <label for="url">Links:</label>
  <button class="btn btn-success" (click)="addLink()" type="button">
    <span>Add URL:</span>
  </button>
  <ng-container *ngFor="let _ of message.links; let i = index;trackBy:trackById">
    <div class="row input-group">
      <input name="url" type="text" placeholder="http://www.example.com" class="form-control"
             [(ngModel)]="message.links[i]"/>
      <button class="btn btn-danger" (click)="removeLink(i)">Remove URL</button>
    </div>
  </ng-container>

  <div class="location-boundaries">
    <a class="btn btn-primary collapse-button" id="collapseButton" data-toggle="collapse" href="#locationCollapse"
       role="button" aria-expanded="false" aria-controls="locationCollapse" (click)="locationDataHide()">Location
      boundaries</a>
    <div class="collapse" id="locationCollapse">
      <div class="form-group row location-form-group">
        <div class="col-xs-2">
          <label for="latTextField">Latitude</label>
          <input type="number" step="0.00000001" class="form-control" name="lat" id="latTextField" placeholder="lat"
                 size="10" maxlength="10" [(ngModel)]="locationData.lat">
        </div>
        <div class="col-xs-2">
          <label for="lngTextField">Longitude</label>
          <input type="number" step="0.00000001" class="form-control" name="lng" id="lngTextField" placeholder="lng"
                 size="10" maxlength="10" [(ngModel)]="locationData.lng">
        </div>
      </div>
      <div class="radius-selection">
        <div class="row">
          <input type="range" min="10" max="100" class="slider" id="radiusRange" name="radius"
                 [(ngModel)]="locationData.radius">
          <span>{{locationData.radius}} km</span>
        </div>
      </div>
    </div>
  </div>
  <button type="button" class="btn btn-primary" (click)="sendMessage()">Submit</button>
</div>
