<mat-sidenav-container class="h-100">
  <mat-sidenav-content>
    <div class="container d-flex flex-column h-100">
      <h2>Statistics</h2>
      <div style="display: flex">
        <app-elektrobit-date-picker class="flex-grow-1 mb-2" [(date)]="metricsFilter.timeSpanBegin" (dateChange)="loadMetrics()"></app-elektrobit-date-picker>
        <app-elektrobit-date-picker class="flex-grow-1 mb-2" [(date)]="metricsFilter.timeSpanEnd" (dateChange)="loadMetrics()"></app-elektrobit-date-picker>
      </div>

      <select
        class="browser-default custom-select mt-2"
        name="topic" id="topic"
        [(ngModel)]="metricsFilter.topicName"
        (ngModelChange)="loadMetrics()">
        <option selected [ngValue]="null"></option>
        <option *ngFor="let t of topics" [ngValue]="t.binding">{{t.title}}</option>
      </select>

      <div echarts [options]="sentMessagesOptions"></div>
      <div echarts [options]="subscriberGainOptions"></div>
      <div echarts [options]="messagesByTimeOfDayOptions"></div>

      <mat-divider></mat-divider>

      <select
        class="browser-default custom-select mt-2"
        [(ngModel)]="showTop5">
        <option [ngValue]="true">Top 5 Topics</option>
        <option [ngValue]="false">All Topics</option>
      </select>

      <div *ngIf="showTop5" echarts [options]="topicsPieOptions"></div>
      <div *ngIf="!showTop5" echarts [options]="topicsBarOptions"></div>

    </div>
  </mat-sidenav-content>
</mat-sidenav-container>
